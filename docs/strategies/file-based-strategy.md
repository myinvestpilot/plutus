# FileBasedStrategy

FileBasedStrategy 是策引平台的一个策略类型，主要给 AI 策略使用。AI Agent 生成交易信号后，这个策略读取这些信号文件来执行回测，分析策略表现。

## 怎么工作的

### 基本流程

1. **AI 生成信号**：AI Agent 分析市场后，生成买卖信号
2. **保存到文件**：信号保存成 CSV 格式的文件
3. **策略读取**：FileBasedStrategy 读取这个文件
4. **执行回测**：根据文件里的信号进行历史回测
5. **分析表现**：看这个 AI 策略的历史表现如何

### 信号文件格式

CSV 文件包含四列：
- **date**：交易日期
- **symbol**：股票代码
- **signal**：买卖信号
- **comment**：AI 的分析理由

### 信号类型

- **B**：买入
- **S**：卖出  
- **H**：继续持有（AI 说明为什么继续拿着）
- **E**：空仓（AI 说明为什么不买）

## 文件例子

```csv
date,symbol,signal,comment
2024-01-15,AAPL,B,技术突破关键阻力位，基本面强劲
2024-03-20,AAPL,S,估值过高，获利了结
2024-06-10,TSLA,H,电动车行业领导地位稳固，继续持有
2024-08-05,GOOGL,E,等待财报明朗，暂时观望
```

## 为什么有用

### 1. 测试 AI 策略
- 可以看 AI 的历史决策效果如何
- 知道 AI 在什么时候容易出错
- 帮助改进 AI 的分析逻辑

### 2. 决策有记录
- 每个买卖决定都有原因
- 可以追踪 AI 的思考过程
- 方便后续分析和改进

### 3. 灵活性好
- AI 可以随时更新交易信号
- 支持本地文件测试
- 也可以用云端文件

## 文件存放位置

### 本地模式
- 用于开发和测试
- 把 CSV 文件放在指定文件夹
- 适合个人使用

### 云端模式
- 文件存在 S3 上
- 多个地方可以访问
- 适合 AI Agent 自动更新

## 标的池管理

### 标的变化处理
- **组合里有，文件里也有**：正常执行交易
- **组合里有，文件里没有**：保持空仓，等 AI 生成新信号
- **组合里没有，文件里有**：忽略这个股票的信号

这样设计是合理的：
- 删除股票说明不想投资了
- 新增股票会等 AI 重新分析
- 现有股票继续按 AI 信号执行

## 使用场景

### 1. AI 策略回测
**主要用途**：
- 开发新的 AI 投资策略
- 测试 AI 在不同市场环境下的表现
- 验证 AI 决策逻辑的有效性

### 2. 策略对比
**分析用途**：
- 对比不同 AI 模型的效果
- 分析人工决策和 AI 决策的差异
- 找出最优的策略组合

### 3. 实盘准备
**部署前验证**：
- 在真实数据上测试 AI 策略
- 确保策略逻辑没有问题
- 评估风险和收益特征

## 注意事项

### 1. 文件格式要正确
- 日期格式必须是 YYYY-MM-DD
- 信号只能是 B、S、H、E
- CSV 格式要规范

### 2. 交易信号要合理
- 不能空仓的时候卖出
- 不能满仓的时候买入
- 系统会自动过滤无效信号

### 3. 文件及时更新
- AI 生成新信号要及时保存
- 删除过期的信号记录
- 保持文件的时效性

## 在策引平台使用

### 创建组合时选择
在策引平台创建投资组合时：
1. 选择 "FileBasedStrategy" 作为策略类型
2. 配置信号文件的位置（本地或云端）
3. 设置其他参数如资金管理规则
4. 开始回测分析

### 配置参数
- **vendor**：选择 local（本地）或 remote（云端）
- **path**：指定文件路径（本地模式时）
- **signal_source**：信号来源标识
- **signal_generator**：AI 模型标识

## 总结

FileBasedStrategy 是专门为 AI 策略设计的：

**主要用途**：
- 让 AI Agent 生成的交易信号能够回测
- 分析 AI 策略的历史表现
- 验证 AI 决策逻辑的有效性

**适合谁用**：
- 开发 AI 投资策略的团队
- 想测试 AI 决策效果的投资者
- 需要对比不同策略的研究人员

**关键特点**：
- 简单的 CSV 文件格式
- 支持详细的决策记录
- 灵活的标的池管理
- 完整的回测分析功能

---

**开始使用**：在[策引平台](https://www.myinvestpilot.com)选择 FileBasedStrategy 来测试你的 AI 投资策略。