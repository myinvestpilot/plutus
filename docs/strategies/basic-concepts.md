# 交易策略基础

交易策略是投资组合的核心组成部分，它决定什么时候买入和卖出。在策引平台，交易策略与资金策略配合，共同构成完整的投资组合。

## 交易策略 vs 资金策略

在策引平台，投资组合由两部分组成：

### 交易策略（Trade Strategy）
**负责**：决定买入和卖出的时机
- **输入**：价格、成交量、技术指标等
- **输出**：买入信号、卖出信号、持有信号、空仓信号
- **例子**：双均线策略、吊灯止损策略、AI大模型策略

### 资金策略（Capital Strategy）
**负责**：决定每次交易投入多少资金
- **输入**：当前现金、总资产、交易信号
- **输出**：具体的交易金额
- **例子**：百分比策略、定投策略、简单百分比策略

**简单来说**：交易策略告诉你"什么时候买卖"，资金策略告诉你"买卖多少钱"。

## 策引支持的交易策略范围

策引专注于**基于OHLC数据的技术分析策略**，因为这类策略：

- 逻辑相对简单，普通人能理解
- 数据需求明确，只需要价格和成交量
- 能够产生稳定的交易信号
- 风险相对可控

### 策引不支持的策略类型

**过于复杂的策略**：
- 基本面分析（需要财报、估值数据）
- 事件驱动策略（需要新闻、公告数据）
- 复杂的量化多因子模型
- 高频交易策略
- 图表形态识别（头肩顶等复杂形态）

**为什么不支持**：这些策略过于复杂，不适合普通投资者。一个能稳定触发信号、风险可控的简单策略，远好过一个逻辑完美但从不执行的复杂策略。

## 策引的交易策略类型

### 1. 代码策略
**什么是代码策略**：
- 策引官方用代码写好的策略
- 你可以调整参数，但不能改核心逻辑
- 适合带状态的复杂策略（如动量轮动）

**特点**：
- 上手简单，选好参数就能用
- 策略经过验证，相对稳定
- 适合新手和懒得研究的人

**典型例子**：
- 双均线策略
- 买入持有策略
- 动量轮动策略（需要跨股票比较）

### 2. 原语策略
**什么是原语策略**：
- 用策引的组件自己搭建的策略
- 像搭积木一样组合各种指标和信号
- 适合不带状态的OHLC策略

**特点**：
- 灵活性高，想怎么组合都行
- 逻辑透明，每个组件都看得清楚
- 适合有想法但不会编程的人

**适合做什么**：
- 复杂的技术指标组合
- "当A条件和B条件满足时买入"这类逻辑
- 单个股票的买卖判断

**不适合做什么**：
- 需要比较多只股票的策略
- 需要记住历史状态的策略
- 过于复杂的图表形态识别

### 3. FileBasedStrategy
**什么是文件策略**：
- 专门给AI Agent用的策略
- AI生成交易信号保存到文件
- 这个策略读取文件来执行回测

**主要用途**：
- 测试AI的投资决策能力
- 验证AI生成的交易信号效果
- 让AI策略能够回测和分析

### 按投资理念分类

#### 1. 趋势跟踪策略
趋势跟踪策略试图捕捉市场的主要趋势，在趋势形成时买入，趋势结束时卖出。

**基本原理**：
- 假设价格趋势会持续一段时间
- 使用技术指标识别趋势方向
- 顺势而为，避免逆势操作

**核心理念**：**策略的核心是趋势跟随，而非预测拐点**
- **目标是"截断亏损，让利润奔跑"**：趋势策略旨在抓住市场的主要趋势，而非短期波动，因此可能产生多次小额的试错成本
- **关注长期盈亏比，而非短期胜率**：此类策略的特点通常是胜率不高，但力求在抓住趋势时获得较高的潜在收益，以覆盖多次试错的成本

**典型策略**：

**双均线策略**：通过短期（如10日）和长期（如30日）移动平均线的交叉生成交易信号。当短期均线向上穿越长期均线时产生买入信号（金叉），向下穿越时产生卖出信号（死叉）。这个策略专注于市场趋势的判断，需要配合资金管理策略来决定每次交易的资金量。

**吊灯止损均线策略**：结合技术指标生成交易信号。使用ATR（平均真实波幅）的Chandelier止损点来确定趋势方向和止损位置，配合移动平均线确认趋势。这个策略负责市场趋势判断和止损信号的生成，需要配合资金管理策略来确定具体的持仓量。

**适用场景**：
- 趋势明显的市场环境
- 中长期投资时间框架
- 追求捕捉大级别行情的投资者

**风险特征**：
- 在震荡市中表现不佳
- 会有较多的小额亏损
- 依赖少数几次大幅盈利

#### 2. 买入持有策略
买入持有策略相信长期投资的力量，通过持有优质资产获得长期收益。

**基本原理**：
- 相信市场长期向上的趋势
- 避免频繁交易的成本和风险
- 注重资产配置而非择时

**策略特点**：
- **交易策略说明**：这是一个用于定投收益分析的演示策略。每天都会产生买入信号，需要配合FixedInvestmentStrategy等资金策略使用，由资金策略决定是否有足够资金执行买入
- **重要提示**：此策略仅用于定投分析演示，不建议用于实际交易组合

**适用场景**：
- 对市场择时缺乏信心
- 希望降低交易成本
- 追求稳健长期收益

#### 3. 动量轮动策略
动量轮动策略通过计算各标的的历史动量指标来选择表现最强的资产进行投资。

**基本原理**：
- 策略会在每个周期结束时评估所有可选标的的历史价格动量（涨幅表现）
- 将资金配置到动量最强的标的上
- 当其他标的的动量超过当前持有标的时进行调仓

**策略特点**：
- 能够捕捉市场中强势上涨的资产
- 适用于多品种之间的轮动投资
- 特别适合ETF等不同市场主题的轮动

**适用场景**：
- 多元化投资组合
- 不同市场主题之间的轮动
- 追求相对强势资产的投资者

#### 4. 均值回归策略
均值回归策略认为价格会围绕其均值波动，当价格偏离过多时会回归。

**基本原理**：
- 价格过度上涨后会下跌
- 价格过度下跌后会反弹
- 利用超买超卖机会进行交易

**注意事项**：
- 在强趋势市场中风险较大
- 需要精确的入场和出场时机
- 目前策引平台较少使用此类策略

## 交易信号状态详解

策引平台的交易信号包含四种状态，这些状态仅为策略在特定时点对历史数据的回测结果：

### 买入（BUY）
**含义**：指策略显示，在此前回测节点未持仓，而在当前节点出现了符合策略的开仓信号。

**触发条件示例**：
- 短期均线上穿长期均线
- 价格突破关键阻力位
- 技术指标显示超卖后反弹

### 卖出（SELL）
**含义**：指策略显示，在此前回测节点为持仓状态，而在当前节点出现了符合策略的平仓信号。

**触发条件示例**：
- 短期均线下穿长期均线
- 价格跌破重要支撑位
- 技术指标显示超买后回落

### 持有（HOLD）
**含义**：指策略显示，在此前回测节点已开仓，而在当前节点未出现平仓信号。

**状态特点**：
- 已有持仓，但没有卖出信号
- 继续持有当前头寸
- 等待卖出条件触发

### 空仓（EMPTY）
**含义**：指某个标的在当前策略回测下，无持仓且未出现开仓信号。

**状态特点**：
- 没有持仓，也没有买入信号
- 等待机会或观望状态

## 核心技术概念

### 技术指标
技术指标是基于价格和成交量数据计算的数学公式，用于分析市场趋势和信号。

#### 移动平均线（Moving Average）
**定义**：一定时期内价格的平均值，随时间移动计算。

**类型**：
- **简单移动平均线（SMA）**：算术平均值
- **指数移动平均线（EMA）**：近期价格权重更大

**应用**：
- 判断趋势方向
- 生成买卖信号（均线交叉）
- 确定支撑阻力位

#### 平均真实波幅（ATR）
**定义**：衡量价格波动性的指标，反映市场的活跃程度。

**计算方法**：
真实波幅 = max(高价-低价, |高价-前收盘|, |低价-前收盘|)
ATR = 真实波幅的N日移动平均

**应用**：
- 设置止损位置
- 确定仓位大小
- 评估市场风险

#### 相对强弱指数（RSI）
**定义**：衡量价格变化速度和幅度的动量指标。

**取值范围**：0-100
- RSI > 70：可能超买
- RSI < 30：可能超卖

**应用**：
- 识别超买超卖状态
- 寻找背离信号
- 确认趋势强度

## 风险管理概念

### 止损（Stop Loss）
**定义**：当价格朝不利方向移动到预设水平时，自动平仓止损。

**设置方法**：
- **固定金额止损**：亏损固定金额时止损
- **百分比止损**：亏损达到一定比例时止损
- **技术止损**：基于技术指标设置止损

### 仓位管理（Position Sizing）
**定义**：决定每笔交易投入多少资金的管理方法。

**常用方法**：
- **固定金额**：每次投入固定金额
- **百分比仓位**：投入总资金的固定百分比
- **风险平价**：根据风险水平分配资金

### 最大回撤（Maximum Drawdown）
**定义**：从投资组合净值峰值到谷值的最大跌幅。

**意义**：
- 反映策略的最大风险暴露
- 帮助评估心理承受能力
- 策略风险控制的重要指标

### 夏普比率（Sharpe Ratio）
**定义**：衡量每单位风险获得的超额收益。

**计算公式**：
夏普比率 = (投资组合收益率 - 无风险收益率) / 投资组合标准差

**意义**：
- 数值越高，风险调整后收益越好
- 便于比较不同策略的优劣
- 一般认为>1为良好，>2为优秀

## 回测与验证

### 回测的重要性
回测是验证投资策略有效性的关键工具：

**作用**：
- 验证策略在历史数据上的表现
- 了解策略的风险收益特征
- 发现策略的潜在问题

**局限性**：
- 历史表现不代表未来结果
- 可能存在过拟合风险
- 无法完全模拟真实交易环境

### 关键回测指标

**收益指标**：
- 总收益率
- 年化收益率
- 月度/年度收益分布

**风险指标**：
- 最大回撤
- 波动率（标准差）
- VaR（风险价值）

**效率指标**：
- 夏普比率
- 卡尔马比率（年化收益/最大回撤）
- 胜率和盈亏比

## 常见问题解答

### 策略设计相关

#### 为何展示的胜率不高？
我们的策略设计基于公开的市场理论和资金管理方法，并经过历史数据进行回测验证。

**策略核心是趋势跟随，而非预测拐点**：
- **目标是"截断亏损，让利润奔跑"**：趋势策略旨在抓住市场的主要趋势，而非短期波动，因此可能产生多次小额的试错成本
- **关注长期盈亏比，而非短期胜率**：此类策略的特点通常是胜率不高，但力求在抓住趋势时获得较高的潜在收益，以覆盖多次试错的成本

### 资金管理相关

#### 当参考买入信号时，该如何考虑资金分配？
不同组合展示了不同的历史资金策略模型，仅供参考：

- **百分比模型**：单个标的在历史回测中最多占用特定比例资金（如20%）
- **全仓模型**：回测中一旦出现买入信号，即投入全部可用资金

**重要提示**：这些仅为历史回测中的模拟资金管理模型，仅供学习参考。用户应在充分理解不同资金管理模型风险的基础上，独立制定并执行完全符合自身风险承受能力的投资策略。所有模拟结果不构成投资建议。

### 实盘执行相关

#### 为何不提供自动化交易？
**自动化交易**：目前产品策略基于日线级别，交易频率不高。同时，自动化交易涉及复杂的技术和合规风险，因此暂不提供。

**投资决策独立性**：所有投资决策应由用户独立做出。一旦决定参考某个策略，后续的卖出决策若能与该策略的"卖出"信号保持一致，是维持策略一致性的关键。

## 实践建议

### 选择策略的原则

1. **理解策略原理**：确保完全理解策略的逻辑和假设
2. **评估风险承受力**：策略的最大回撤是否在可接受范围内
3. **考虑时间框架**：策略的交易频率是否符合个人情况
4. **验证历史表现**：在不同市场环境下的表现如何

### 策略执行要点

1. **纪律执行**：严格按照策略信号执行，避免情绪干扰
2. **适当分散**：不要把所有资金投入单一策略
3. **定期评估**：定期检查策略表现，必要时进行调整
4. **持续学习**：不断提升投资知识和技能

---

**下一步**：了解具体的[双均线策略](/docs/strategies/dual-moving-average)或[吊灯止损策略](/docs/strategies/chandelier-exit)，或探索[原语策略系统](/docs/primitives/getting-started)。 